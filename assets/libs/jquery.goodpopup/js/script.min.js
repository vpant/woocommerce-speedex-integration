!function(s){"use strict";var i,u,d="goodpopup",r="js-goodpopup-close",l="goodpopup-close__png",a="goodpopup_visible",c="goodpopup-inner-content_destroyed",g="goodpopup-inner-content-element_withclosebutton",f="goodpopup-inner-content-element_fullwidth",C="goodpopup-inner-content-element_hidden",h="goodpopup-inner-content-element_hiddenfull",A="goodpopup-inner-content-element_pseudohidden",P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAMO9gn88Q369Agi28KgAAAQtJREFUeAGl10FOw1AMRVEnaZLi/S8YoY/0ACMOUt/w1+cOOqlaa9ve51X/3nX2vVX24ftrwb573757FIZfhfhV2MqrbfkUls8TNs7z4MI8//Hgwjw/u10YPufV7cL0WT1RgO+6Thf+8M9CAf5RhQL9+ggFeBTgUYBHgR6FPupzR8OjAI8CPAvyLsC7AM+CvQvza0GBHgV77LB3wd4FexfsXbB/PWDvgr0L9i7Ys2Df/faCxy8vPArwKMCjIH8cKMhXoUCPAj0K9CjYo2CPgj0K9tnjtwI9Cudl74I9Crc8CkWPQu3wKNy17fCzMP402c9CfAr2KcSnAD8K8SnQpxCfgn0K8Sns9inEvwMkUkuut7bS3AAAAABJRU5ErkJggg==",O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAIVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt0UjBAAAACnRSTlMAMO9gn88Q369Agi28KgAAAQtJREFUeAGl10FOw1AMRVEnaZLi/S8YoY/0ACMOUt/w1+cOOqlaa9ve51X/3nX2vVX24ftrwb573757FIZfhfhV2MqrbfkUls8TNs7z4MI8//Hgwjw/u10YPufV7cL0WT1RgO+6Thf+8M9CAf5RhQL9+ggFeBTgUYBHgR6FPupzR8OjAI8CPAvyLsC7AM+CvQvza0GBHgV77LB3wd4FexfsXbB/PWDvgr0L9i7Ys2Df/faCxy8vPArwKMCjIH8cKMhXoUCPAj0K9CjYo2CPgj0K9tnjtwI9Cudl74I9Crc8CkWPQu3wKNy17fCzMP402c9CfAr2KcSnAD8K8SnQpxCfgn0K8Sns9inEvwMkUkuut7bS3AAAAABJRU5ErkJggg==",I=!1,m={},v=[],k=0,t=!!("object"==typeof Modernizr&&"boolean"==typeof Modernizr.inlinesvg&&Modernizr.inlinesvg||function n(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}()),b=function(){var e,t=document.createElement("div"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(e in n)if("undefined"!=typeof t.style[e])return n[e];return!1}(),e=function(){var e,t,n,o;e=s("<div>").css("position","absolute").css("visibility","hidden").css("width","100px").css("msOverflowStyle","scrollbar"),s("body").append(e).promise().done(function(){n=e.outerWidth(),e.css("overflow","scroll"),t=s("<div>").css("width","100%"),e.append(t).promise().done(function(){o=t.innerWidth(),e.remove(),k=n-o})})},$=function(e,t,n){function o(e){"undefined"!=typeof console&&"function"==typeof console.error?console.error(e):alert(e)}switch(t){case"NOT_FOUND":return o("Popup template `"+e+"` doesn't exist"),e;case"WRONG_OPTIONS":return o("Wrong options object in method `setOptions` on popup `"+e+"`"),n;default:return function p(e){"undefined"!=typeof console&&"function"==typeof console.trace?console.trace(e):alert(e)}("Problem with popup"),e}},w={closeButtonMarkup:function(e){return'<span class="goodpopup-close js-goodpopup-close">'+(t?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" enable-background="new 0 0 16 16" class="goodpopup-close-svg"><path class="goodpopup-close-svg__path" d="m15.8 13.5l-5.4-5.5 5.5-5.4c.2-.2.2-.6 0-.8l-1.6-1.6c-.1-.1-.3-.2-.4-.2-.2 0-.3.1-.4.2l-5.5 5.4-5.5-5.4c-.1-.1-.2-.2-.4-.2s-.3.1-.4.2l-1.5 1.5c-.2.2-.2.6 0 .8l5.4 5.5-5.5 5.5c0 .1-.1.2-.1.4 0 .2.1.3.2.4l1.6 1.6c.1.1.2.1.4.1.1 0 .3-.1.4-.2l5.4-5.4 5.4 5.5c.1.1.3.2.4.2.1 0 .3-.1.4-.2l1.6-1.6c.1-.1.2-.3.2-.4 0-.2-.1-.3-.2-.4"></path></svg>':'<img src="'+(e?O:P)+'" alt="" class="'+l+'"/>')+"</span>"},createPopupDOM:function(){return s('<div class="goodpopup js-goodpopup"><div class="goodpopup-inner"><div class="goodpopup-inner-content js-goodpopup-inner-content"></div></div></div>').appendTo("body").promise().done(function(){i=s(".js-goodpopup"),u=i.find(".js-goodpopup-inner-content")})},renderPopupContentDOM:function(e,t,n,o,p){var i=s('<div class="goodpopup-inner-content-element '+(o?g:"")+" "+(p?f:"")+'" data-popup-id="'+e+'"></div>');return i.append(w.renderPopupContentTemplateDOM(t,n)).append(o?w.closeButtonMarkup(p):""),i},renderPopupContentTemplateDOM:function(e,t){var n;return 0<e.filter("script[type='text/x-handlebars-template']").length?"object"==typeof window.Handlebars&&(n=Handlebars.compile(e.html())("object"!=typeof t?{}:t)):n=e.clone().removeAttr("id").attr("data-id",e.attr("id")),n}},o={handleKeydown:function(e){for(var t=this.getOptions().keyCodeForClosing,n=0;n<t.length;n++)if(e.keyCode===t[n]){y.close.call(this,this.getOptions().forceClosing.keydown);break}return this},handleOuterClick:function(e){var t=s(e.target);return this.getOptions().isOuterClickClosing&&0===t.parents(".js-goodpopup-inner-content").length&&!t.hasClass(r)&&y.close.call(this,this.getOptions().forceClosing.click),this}},y={open:function(){var n=this;if(I)if(n.isRendered()){if(!n.isHidden())return n;s.each(m,function(e,t){if(t.instance.isRendered()&&!t.instance.isHidden())return y._hide.call(t.instance,function(){n.getOptions().callbackBeforeOpen.call(n),y._show.call(n)}),!1})}else s.each(m,function(e,t){if(t.instance.isRendered()&&!t.instance.isHidden())return y._hide.call(t.instance,function(){n.getOptions().callbackBeforeOpen.call(n),y._renderContent.call(n)}),!1});else n.getOptions().callbackBeforeOpen.call(n),y._renderContent.call(n);return n},close:function(e){var t=this;if(!I||!t.isRendered())return t;var n=e||!1;if(0<v.length)if(n){for(var o=v.length;0<o;o--)y._destroyContent.call(v[o-1].instance,!1);y._destroyContent.call(t,!0)}else y._destroyContent.call(t,!1,function(){v[v.length-1].instance.getOptions().callbackBeforeOpen.call(v[v.length-1].instance),y._show.call(v[v.length-1].instance)});else y._destroyContent.call(t,!0);return t},dequeue:function(){return I&&this.isHidden()&&this.isRendered()&&y._destroyContent.call(this,!1),this},_renderContent:function(){var t=this;if(t.isRendered()&&!t.getOptions().isIframe&&!t.getOptions().isPrerendered)return t;var e=function(){if(m[t.getPopupId()].$popupClose=m[t.getPopupId()].$popupContent.find("."+r),m[t.getPopupId()].$popupClose.on("click."+d,function(){y.close.call(t,t.getOptions().forceClosing.button)}),s(document).off("keydown."+d).on("keydown."+d,function(e){o.handleKeydown.call(t,e)}),i.off("click."+d).on("click."+d,function(e){o.handleOuterClick.call(t,e)}),I)b&&m[t.getPopupId()].$popupContent.off(b+".plugin_suffix").on(b+".plugin_suffix",function(e){e.target===m[t.getPopupId()].$popupContent[0]&&(m[t.getPopupId()].$popupContent.off(b+".plugin_suffix"),t.getOptions().callbackAfterOpen.call(t))}),setTimeout(function(){m[t.getPopupId()].$popupContent.removeClass(A)},1),b||t.getOptions().callbackAfterOpen.call(t),m[t.getPopupId()].isRendered=!0,m[t.getPopupId()].isHidden=!1,I=!0;else{var e=s("body").width();s("html").addClass("noscroll"),s("body").width()>e&&(s("html").addClass("noscroll-margin").css("margin-right",parseFloat(s("html").css("margin-right"))+k+"px"),s(".goodpopup-margin-right").each(function(){var e=s(this);e.css("margin-right",parseFloat(e.css("margin-right"))+k+"px")}),s(".goodpopup-margin-left").each(function(){var e=s(this);e.css("margin-left",parseFloat(e.css("margin-left"))-k+"px")})),b&&i.off(b+".plugin_suffix").on(b+".plugin_suffix",function(e){e.target===i[0]&&(i.off(b+".plugin_suffix"),t.getOptions().callbackAfterOpen.call(t))}),i.addClass(a),b||t.getOptions().callbackAfterOpen.call(t),m[t.getPopupId()].isRendered=!0,m[t.getPopupId()].isHidden=!1,I=!0}};return t.getOptions().isPrerendered||(t.getOptions().isDetachable||t.getOptions().isIframe?0===m[t.getPopupId()].$popupContent.length&&(m[t.getPopupId()].$popupContent=s(w.renderPopupContentDOM(t.getPopupId(),t.getTemplate(),t.getOptions().data,t.getOptions().hasCloseButton,t.getOptions().isFullWidth))):m[t.getPopupId()].$popupContent=s(w.renderPopupContentDOM(t.getPopupId(),t.getTemplate(),t.getOptions().data,t.getOptions().hasCloseButton,t.getOptions().isFullWidth))),I&&m[t.getPopupId()].$popupContent.addClass(A),!t.getOptions().isPrerendered&&!t.getOptions().isIframe||t.getOptions().isIframe&&!t.isRendered()?u.append(m[t.getPopupId()].$popupContent).promise().done(function(){e()}):(t.getOptions().isPrerendered&&t.setOptions({isPrerendered:!1}),m[t.getPopupId()].$popupContent.removeClass(C+" "+h),e()),t},_rerenderContent:function(e){var t=this,n=m[t.getPopupId()].$popupContent;return m[t.getPopupId()].$popupClose.off("click."+d),m[t.getPopupId()].$popupContent=s(w.renderPopupContentDOM(t.getPopupId(),t.getTemplate(),t.getOptions().data,t.getOptions().hasCloseButton,t.getOptions().isFullWidth)),m[t.getPopupId()].$popupContent.addClass(C+" "+h),n.after(m[t.getPopupId()].$popupContent).promise().done(function(){n.remove(),m[t.getPopupId()].$popupClose=m[t.getPopupId()].$popupContent.find("."+r),"function"==typeof e&&e()}),t},_destroyContent:function(e,t){var n,o=this;if(!o.isRendered())return o;o.getOptions().callbackBeforeClose.call(o);for(var p=0;p<v.length;p++)if(v[p].instance===o){v.splice(p,1);break}return void 0!==e&&e?(n=function(){o.getOptions().isIframe?(m[o.getPopupId()].$popupContent.addClass(C+" "+h).removeClass(c),m[o.getPopupId()].isHidden=!0):o.getOptions().isDetachable?m[o.getPopupId()].$popupContent.detach().removeClass(C+" "+h+" "+A+" "+c):(m[o.getPopupId()].$popupContent.remove(),m[o.getPopupId()].$popupContent=s()),o.getOptions().callbackAfterClose.call(o)},i.off("click."+d),s(document).off("keydown."+d),m[o.getPopupId()].$popupClose.off("click."+d),b&&i.off(b+".plugin_suffix").on(b+".plugin_suffix",function(e){e.target===i[0]&&(i.off(b+".plugin_suffix"),n())}),i.removeClass(a),b||n(),s("html").removeClass("noscroll"),s("html").hasClass("noscroll-margin")&&(s("html").css("margin-right",parseFloat(s("html").css("margin-right"))-k+"px").removeClass("noscroll-margin"),s(".goodpopup-margin-right").each(function(){var e=s(this);e.css("margin-right",parseFloat(e.css("margin-right"))-k+"px")}),s(".goodpopup-margin-left").each(function(){var e=s(this);e.css("margin-left",parseFloat(e.css("margin-left"))+k+"px")})),I=!1,m[o.getPopupId()].isHidden=!1,o.getOptions().isIframe||(m[o.getPopupId()].isRendered=!1)):(n=function(){o.getOptions().isIframe?(m[o.getPopupId()].$popupContent.addClass(C+" "+h).removeClass(c),m[o.getPopupId()].isHidden=!0):o.getOptions().isDetachable?m[o.getPopupId()].$popupContent.detach().removeClass(C+" "+h+" "+A+" "+c):(m[o.getPopupId()].$popupContent.remove(),m[o.getPopupId()].$popupContent=s()),o.getOptions().callbackAfterClose.call(o),"function"==typeof t&&t()},m[o.getPopupId()].$popupClose.off("click."+d),m[o.getPopupId()].isHidden?(m[o.getPopupId()].isHidden=!1,o.getOptions().isIframe||(m[o.getPopupId()].isRendered=!1),n()):(b&&m[o.getPopupId()].$popupContent.off(b+".plugin_suffix").on(b+".plugin_suffix",function(e){e.target===m[o.getPopupId()].$popupContent[0]&&(m[o.getPopupId()].$popupContent.off(b+".plugin_suffix"),n())}),m[o.getPopupId()].$popupContent.addClass(c),b||n(),m[o.getPopupId()].isHidden=!1,o.getOptions().isIframe||(m[o.getPopupId()].isRendered=!1))),o},_show:function(){var n=this;if(!n.isHidden())return n;for(var e=0;e<v.length;e++)if(v[e].instance===n){v.splice(e,1);break}function t(){var t=function(){s(document).off("keydown."+d).on("keydown."+d,function(e){o.handleKeydown.call(n,e)}),i.off("click."+d).on("click."+d,function(e){o.handleOuterClick.call(n,e)}),m[n.getPopupId()].$popupClose.off("click."+d).on("click."+d,function(){y.close.call(n,n.getOptions().forceClosing.button)}),n.getOptions().callbackAfterOpen.call(n)};b&&m[n.getPopupId()].$popupContent.off(b+".plugin_suffix").on(b+".plugin_suffix",function(e){e.target===m[n.getPopupId()].$popupContent[0]&&(m[n.getPopupId()].$popupContent.off(b+".plugin_suffix"),t())}),setTimeout(function(){m[n.getPopupId()].$popupContent.removeClass(h+" "+C)},1),b||t(),m[n.getPopupId()].isHidden=!1}return n.getOptions().isDetachable||n.getOptions().isIframe?t():y._rerenderContent.call(n,function(){t()}),n},_hide:function(e){var t=this;if(t.isHidden())return t;function n(){m[t.getPopupId()].$popupContent.addClass(h),t.getOptions().callbackAfterClose.call(t),"function"==typeof e&&e()}t.getOptions().callbackBeforeClose.call(t),s(document).off("keydown."+d),i.off("click."+d),m[t.getPopupId()].$popupClose.off("click."+d),b&&m[t.getPopupId()].$popupContent.off(b+".plugin_suffix").on(b+".plugin_suffix",function(e){e.target===m[t.getPopupId()].$popupContent[0]&&(m[t.getPopupId()].$popupContent.off(b+".plugin_suffix"),n())}),m[t.getPopupId()].$popupContent.addClass(C),b||n(),v.push(m[t.getPopupId()]),m[t.getPopupId()].isHidden=!0}},_=function(e,t){var n=this,o=e.attr("id"),p=t;return this.getOptions=function(){return p},this.getPopupId=function(){return o},this.getPopupContent=function(){return m[n.getPopupId()].$popupContent},this.getTemplate=function(){return e},this.isRendered=function(){return m[n.getPopupId()].isRendered},this.isHidden=function(){return m[n.getPopupId()].isHidden},this.setOptions=function(e){return s.isPlainObject(e)?e.hasOwnProperty("forceClosing")&&!s.isPlainObject(e.forceClosing)?$(o,"WRONG_OPTIONS",e):(e.hasOwnProperty("hasCloseButton")&&e.hasCloseButton!==n.getOptions().hasCloseButton&&n.getPopupContent()&&(e.hasCloseButton?(m[n.getPopupId()].$popupContent.addClass(g).append(w.closeButtonMarkup(n.getOptions().isFullWidth)),m[n.getPopupId()].$popupClose=m[n.getPopupId()].$popupContent.find("."+r),m[n.getPopupId()].$popupClose.off("click."+d).on("click."+d,function(){y.close.call(n,n.getOptions().forceClosing.button)})):(m[n.getPopupId()].$popupClose&&0!==m[n.getPopupId()].$popupClose.length||(m[n.getPopupId()].$popupClose=m[n.getPopupId()].$popupContent.find("."+r)),m[n.getPopupId()].$popupClose.remove(),m[n.getPopupId()].$popupContent.removeClass(g))),e.hasOwnProperty("isFullWidth")&&e.isFullWidth!==n.getOptions().isFullWidth&&n.getPopupContent()&&(e.isFullWidth?(m[n.getPopupId()].$popupContent.addClass(f),m[n.getPopupId()].$popupContent.find("."+l).attr("src",O)):(m[n.getPopupId()].$popupContent.removeClass(f),m[n.getPopupId()].$popupContent.find("."+l).attr("src",P))),e.hasOwnProperty("key_for_closing")&&e.keyCodeForClosing!==n.getOptions().keyCodeForClosing&&"number"==typeof e.keyCodeForClosing&&(e.keyCodeForClosing=[e.keyCodeForClosing]),p=s.extend({},p,e),n):$(o,"WRONG_OPTIONS",e)},this.open=function(){return y.open.call(this)},this.close=function(e){return y.close.call(this,e)},this.dequeue=function(){return y.dequeue.call(this)},n.getOptions().isPrerendered&&(m[n.getPopupId()].$popupContent=s(w.renderPopupContentDOM(n.getPopupId(),n.getTemplate(),n.getOptions().data,n.getOptions().hasCloseButton,n.getOptions().isFullWidth)),m[n.getPopupId()].$popupClose=m[n.getPopupId()].$popupContent.find("."+r),m[n.getPopupId()].$popupContent.addClass(C+" "+h),u.append(m[n.getPopupId()].$popupContent),m[n.getPopupId()].isRendered=!0,m[n.getPopupId()].isHidden=!0),n.getTemplate().data("goodpopup",n),n};s.goodpopup={getPopup:function(e){if("undefined"!=typeof m[e]&&"undefined"!=typeof m[e].instance)return m[e].instance;if(void 0!==e){var t=s("#"+e);return 0===t.length?$(e,"NOT_FOUND"):(t.goodpopup(),m[e].instance)}return!1},getPopups:function(){return m},getQueue:function(){return v},version:"2.0.0-beta.19"},s.fn.goodpopup=function(i){return this.each(function(e,t){var n=s(t),o=n.attr("id"),p="undefined"!=typeof m[o]&&"undefined"!=typeof m[o].instance?m[o].instance:undefined;void 0===p?(m[o]={instance:undefined,isRendered:!1,isHidden:!1,$popupClose:s(),$popupContent:s()},m[o].instance=new _(n,s.extend({},{callbackBeforeOpen:function(){},callbackAfterOpen:function(){},callbackBeforeClose:function(){},callbackAfterClose:function(){},isPrerendered:!1,isIframe:!1,isDetachable:!1,isOuterClickClosing:!0,isFullWidth:!1,hasCloseButton:!0,keyCodeForClosing:[27],forceClosing:{click:!0,keydown:!0,button:!1},data:{}},i,n.data()))):p.setOptions.call(p,i)})};s(function(){e(),w.createPopupDOM().done(function(){s("script[type='text/x-handlebars-template']").goodpopup()})})}(jQuery);
//# sourceMappingURL=script.min.js.map